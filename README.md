# 月经记录与提醒（本地网页）

这是一个简单的前端网页，用于本地记录月经开始日期、预测下次来潮、在页面打开时触发浏览器通知（用于提醒）并展示温馨贴士与医学科普。

主要文件：
- `index.html` - 页面入口
- `styles.css` - 样式
- `app.js` - 核心逻辑（localStorage 存储、预测、通知、贴士）

如何使用：
1. 在现代浏览器中打开 `index.html`（直接双击或通过本地 web 服务器）。
2. 在“记录来经”中选择来经日期并保存。
3. 点击“开启提醒”授权浏览器通知（注意：通知仅在页面打开且浏览器允许时有效）。

新增功能说明：
- 日历视图：可查看任意月份的历史记录与预测。点击任意日期可添加/删除来经开始日，并会在右侧显示该日期对应的温馨提示或阶段说明。
- 预测显示：基于历史平均周期或用户输入的平均周期，页面会在日历上标注预测的来经开始日（淡粉色）。
- 易孕期与排卵日：页面会估算并在日历上高亮“易孕期”（浅金色）和“排卵日”（金色边框），并提供对应的科普与提示（例如避孕/备孕建议）。
- 逐日温馨提示：点击日历任意日期，右侧会显示该日期对应的提示——如果在月经期间，会显示“第 N 天”的具体护理建议；如果在排卵/易孕期会显示相应科普与建议；否则显示常规周期观测建议。

错误修复说明：
- 修复了一个与时区相关的 bug：之前使用 toISOString() 导致保存/比较日期时在某些时区下出现偏移（点击日历会把本来应该属于当天的日期误判为前一天）。现在使用本地 yyyy-mm-dd 格式并统一使用当天零点（startOfDay）比较，避免跨日误判。

隐私与限制回顾：
- 所有数据仅保存在浏览器 localStorage，本地可导出或备份（未来可加导出功能）。
- 浏览器通知仅在页面打开并获得权限时工作；如需真正后台通知，请把站点做成 PWA 并接入 Web Push（需要服务器端支持）。

后续建议（可选）：
- 将页面封装为 PWA 并实现推送后端（需要服务器或第三方服务）以支持后台提醒。
- 添加导出/加密备份、记录疼痛强度与出血量等字段，以便长期健康分析。
- 使用更复杂的生理模型标注排卵（例如考虑周期变异、黄体期长度个体差异），并加入生理周期图表（折线图/热力图）。

本次新增（你目前已同意上传到 GitHub Pages）：
- 记录详情：每次记录现在可包含“该次持续天数、疼痛评分、出血量、心情/备注”等字段，历史记录列表可编辑和删除。
- 可视化：增加基于 Chart.js 的图表，展示周期长度与疼痛评分趋势。图表在浏览器端渲染，无需服务器。

如何把项目部署到 GitHub Pages（静态托管，无服务器）
1. 在 GitHub 上创建一个新仓库（如：menstrual-tracker）。
2. 将当前文件夹内容（`index.html`、`styles.css`、`app.js`、`README.md` 等）推送到仓库的 `main` 或 `gh-pages` 分支。
3. 在仓库页面选择 Settings → Pages，选择 `main` 分支的根目录（/）作为发布源，保存即可。几分钟后网站会通过 `https://<your-username>.github.io/<repo>/` 访问。

隐私提示：
- 因为数据只保存在 localStorage，如果用户在多个设备间使用 GitHub Pages 页面，需要手动导出/备份数据（后续可增加导出/导入功能）。

如需，我可以：
- 帮你生成一个简单的导出/导入 CSV 功能并把导出按钮加入 UI；
- 把 Chart.js 换成本地拷贝，避免依赖外部 CDN（适合离线/更高隐私需求）。

限制与后续改进建议：
- 浏览器通知在标签页关闭或浏览器完全退出时无法触发。若需后台提醒，请将页面制作成 PWA 并使用 Service Worker 与推送服务，或开发手机端应用。 
- 目前预测基于平均周期的线性外推，复杂场景（不规则周期、避孕药、哺乳期等）需要更细致的模型。
- 可以增加导入/导出 CSV、数据加密备份、以及更多医学内容和个性化提醒。

隐私说明：所有数据仅保存在本地浏览器的 localStorage 中，不会上传到服务器。

如果需要，我可以帮你：
- 把页面打包为 PWA 并添加后台推送支持（需要服务器或第三方推送服务）。
- 增加周期可视化（日历视图）或导出功能。
